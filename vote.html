<!-- vote.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>너와 나의 산책 — 투표</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* --- 페이지 전용 보완 --- */
    .question { font-weight: 700; margin: 0 0 12px; }
    .choice-list { display: grid; gap: 10px; margin: 12px 0 18px; padding: 0; list-style: none; }
    .choice {
      display: flex; align-items: center; gap: 10px;
      padding: 10px 12px; border-radius: 12px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.10);
      cursor: pointer;
    }
    .choice input { accent-color: #6ea8fe; transform: scale(1.05); }

    .field { margin: 16px 0 8px; }
    .hint { color: var(--muted); font-size: 13px; margin: 4px 0 0; }

    .text {
      width: 100%; height: 44px; border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.15);
      background: #0f0f15; color: var(--text);
      padding: 0 12px; font-size: 16px; outline: none;
    }
    .text:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(110,168,254,0.25); }

    .actions { display: grid; grid-template-columns: 1fr; gap: 12px; margin-top: 18px; }
    .full { width: 100%; }

    /* 결과 카드 공통 */
    .result {
      margin-top: 22px; padding: 16px 14px;
      border-radius: 14px; background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.12);
    }
    .result h3 { margin: 0 0 8px; }
    .result p { margin: 6px 0; }

    /* 엔딩/에필로그 하단 액션 */
    .ending-actions, .epilogue-actions {
      margin-top: 12px; display: flex; gap: 8px; justify-content: flex-end; flex-wrap: wrap;
    }

    /* 버튼 커스텀 - 마지막 산책(아이보리/골드) */
    #lastWalk {
      background: linear-gradient(135deg, #e6d18a 0%, #f8efc8 100%);
      border: none; color: #1a1a1c; font-weight: 600; transition: 0.25s;
    }
    #lastWalk:hover { filter: brightness(1.1); transform: translateY(-1.5px); }

    /* 버튼 커스텀 - 사건의 진상(아이보리/골드) */
    .truth-btn {
      background: linear-gradient(135deg, #e6d18a 0%, #f8efc8 100%);
      border: none; color: #1a1a1c; font-weight: 600; transition: 0.25s;
    }
    .truth-btn:hover { filter: brightness(1.05); transform: translateY(-1.5px); }

    /* 작가의 인사 토글 */
    details.author-note {
      margin-top: 12px; border-top: 1px dashed rgba(255,255,255,0.18); padding-top: 10px;
    }
    details.author-note summary {
      cursor: pointer; font-weight: 700; list-style: none; outline: none;
    }
    details.author-note[open] summary { opacity: 0.9; }
    .author-note-body { margin-top: 8px; color: var(--muted); line-height: 1.65; }

    /* 하단 내비 (이전 2개) */
    .bottom-nav { margin-top: 24px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

    /* 작가의 인사 토글 화살표 표시 */
    details.author-note summary {
    cursor: pointer;
    list-style: none;
    padding-right: 18px;
    position: relative;
    }

    /* 닫혀 있을 때: ▼ */
    details.author-note summary::after {
    content: "▼";
    position: absolute;
    right: 0;
    top: 0;
    font-size: 13px;
    opacity: 0.7;
    transition: transform 0.25s, opacity 0.25s;
    }

    /* 펼쳐졌을 때: ▲ (회전) */
    details.author-note[open] summary::after {
    transform: rotate(-180deg);
    opacity: 0.9;
    }

    /* ====== 스페셜 버튼(마지막 산책/사건의 진상) 오버라이드 ====== */
    /* 기본 상태 */
    .nav-btn#lastWalk,
    .nav-btn.truth-btn {
    background: linear-gradient(135deg, #e6d18a 0%, #f8efc8 100%);
    color: #1a1a1c;
    border: none;
    font-weight: 600;
    transition: 0.25s;
    }

    /* hover / focus / active 전부 같은 톤 유지 */
    .nav-btn#lastWalk:hover,
    .nav-btn#lastWalk:focus,
    .nav-btn#lastWalk:active,
    .nav-btn.truth-btn:hover,
    .nav-btn.truth-btn:focus,
    .nav-btn.truth-btn:active {
    background: linear-gradient(135deg, #e6d18a 0%, #f8efc8 100%);
    color: #1a1a1c;
    filter: brightness(1.07);
    transform: translateY(-1.5px);
    border: none;
    }

    /* 접근성 포커스 링 (은은한 골드) */
    .nav-btn#lastWalk:focus-visible,
    .nav-btn.truth-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(230, 209, 138, 0.35);
    }

    /* 모바일 탭 하이라이트 제거(선택) */
    .nav-btn#lastWalk, .nav-btn.truth-btn {
    -webkit-tap-highlight-color: transparent;
    }

    #ending-text, #truth-text {
    white-space: pre-line;
    }

    /* 에필로그는 대본 박스(HTML)라서 기본값 사용 */
    #epilogue-text {
    white-space: normal;
    }

      /* 스크립트 박스 전체 */
  .script-box{
    margin-top:12px;
    padding:16px 18px;
    border:1px solid rgba(255,255,255,0.12);
    border-radius:12px;
    background:rgba(255,255,255,0.03);
    color:var(--muted);
  }
  /* 2열 그리드: 왼쪽 이름 칼럼 고정, 오른쪽 대사 가변 */
  .script-grid{
    display:grid;
    grid-template-columns: 110px 1fr;
    column-gap:14px;
    row-gap:14px;
    line-height:1.7;
    font-size:15px;
  }
  .line .name{
    font-weight:800;
    text-align:right;
    color: rgb(255, 255, 255);
    white-space:nowrap;
  }
  .line .said{
    color: rgb(255, 255, 255);
    white-space:pre-wrap;
    word-break:keep-all;
    padding: 6px 12px;
  }
  .narration{
    grid-column: 1 / -1;
    font-style: normal;
    color: rgba(255,255,255,0.88);
    line-height: 1.78;
    padding: 0;
    margin: 4px 0 8px;
    border: none;
    background: none;
  }
  .scene-divider{
    grid-column:1 / -1;
    text-align:center;
    opacity:.7;
    letter-spacing:.2em;
    margin:6px 0;
  }

  .speaker-mark   { color: rgb(254, 186, 13); }
  .speaker-jason  { color: rgb(255, 255, 255); }
  .speaker-tom    { color: rgb(255, 255, 255); }
  .speaker-lucas  { color: rgb(254, 186, 13); }
  .speaker-leo    { color: rgb(254, 186, 13); }
  .speaker-police { color: rgb(254, 186, 13); }
  .speaker-woods  { color: rgb(254, 186, 13); }
  .speaker-ttiti  { color: rgb(255, 255, 255); }
  .speaker-people { color: rgb(255, 255, 255); }

  @media (max-width: 480px){
    .script-grid{ grid-template-columns: 1fr; }
    .line .name{ text-align:left; margin-top:8px; }
  }

  </style>
</head>
<body>
<main class="container">
  <div class="card">
    <p class="desc">BODDO SNACK MYSTERY</p>
    <br>

    <h1 class="title"><span class="em yellow">투표 및 엔딩 확인</span></h1>

    <div class="section">
      <p class="question">다음 중 <strong>헤일리를 살해한 범인</strong>을 선택해 주세요.</p>

      <!-- ✅ form 하나만 유지 -->
      <form id="vote-form" autocomplete="off">
        <ul class="choice-list">
          <li><label class="choice"><input type="radio" name="suspect" value="우즈" required /><span>우즈</span></label></li>
          <li><label class="choice"><input type="radio" name="suspect" value="띠띠" /><span>띠띠</span></label></li>
          <li><label class="choice"><input type="radio" name="suspect" value="제이슨" /><span>제이슨</span></label></li>
          <li><label class="choice"><input type="radio" name="suspect" value="톰" /><span>톰</span></label></li>
          <li><label class="choice"><input type="radio" name="suspect" value="마크" /><span>마크</span></label></li>
          <li><label class="choice"><input type="radio" name="suspect" value="레오" /><span>레오</span></label></li>
          <li><label class="choice"><input type="radio" name="suspect" value="루카스" /><span>루카스</span></label></li>
        </ul>

        <div class="field">
          <label for="motive" class="label">범인의 동기</label>
          <input id="motive" class="text" type="text" placeholder="예: 헤일리에게 복수" />
          <p class="hint">동기: “~~~~(하)기 위해서”에서 <strong>~~~~</strong> 부분만 적어주세요. (예: ‘헤일리에게 복수’)</p>
        </div>

        <div class="actions">
          <button type="submit" class="nav-btn full" id="submit">답안 제출</button>
        </div>
      </form>

      <!-- ✅ 엔딩 박스 (마지막 산책 & 사건의 진상 버튼 포함) -->
      <div id="result-ending" class="result" hidden>
        <h3 class="yellow">엔딩</h3>
        <p id="ending-text"></p>
        <p id="ending-note" class="hint"></p>

        <div class="ending-actions">
          <button class="nav-btn" id="lastWalk">마지막 산책</button>
          <button class="nav-btn truth-btn">사건의 진상</button>
        </div>
      </div>

      <!-- ✅ 에필로그 박스 (사건의 진상 버튼도 포함) -->
      <div id="result-epilogue" class="result" hidden>
        <h3 class="yellow">에필로그(마지막 산책)</h3>
        <div id="epilogue-text"></div>  
        <hr class="divider" />
        <p id="epilogue-note" class="hint"></p>

        <div class="epilogue-actions">
          <button class="nav-btn truth-btn">사건의 진상</button>
        </div>
      </div>

      <!-- ✅ 사건의 진상 박스 (기본 숨김) -->
      <div id="result-truth" class="result" hidden>
        <h3 class="yellow">사건의 진상</h3>
        <p id="truth-text"></p>
        <p id="truth-note" class="hint"></p>

        <!-- 작가의 인사 토글 -->
        <details class="author-note">
          <summary>작가의 인사</summary>
          <div class="author-note-body" id="author-message">
            <p>안녕하세요, 보또입니다.</p>
            <p>[너와 나의 산책]을 플레이해주셔서 감사합니다.</p>
            <p>최근 2~3인 머더 미스터리에 매력을 느끼며, 가까운 사람과 가볍지만 깊게 즐길 수 있는 이야기를 만들고 싶었습니다. 그래서 조금 특별한 관계인 ‘사람’과 ‘반려견’이 함께 사건을 풀어나가는 구성을 생각하게 되었고, 그 관계가 작품 속에서 자연스럽게 받아들여질 수 있는 이야기를 준비했습니다.</p>
            <p>작중 등장인물의 이름은 저희 사무실 식구들의 실제 이름과 별명에서 가져왔습니다. 【헤일리】는 막내 직원의 영어 이름이고, 【우즈】는 이 친구가 가장 좋아하는 가수의 이름에서 따왔습니다. 또한 【띠띠】는 실제로 반려견 ‘앵두’를 키우는 친구의 별명입니다. 골든 리트리버와 잘 어울리는 이름이라 허락을 받고 작품에 사용했습니다.</p>
            <p>초기 설정부터 이 작품은 즐거웠습니다. 개는 예로부터 영혼을 볼 수 있다고 하죠. 그 말에서 출발해 ‘유령’이지만 자신이 죽은 줄 모르는 인물(【우즈】)과 협력할 수 있는 존재로 '개'가 좋다고 생각했습니다. 그리고 이 관계가 더 설득력 있게 다가갈 수 있도록, 【띠띠】는 노견으로 설정했습니다. 둘은 가장 소중한 사람의 죽음을 함께 파헤치다 【우즈】 역시 죽었다는 사실을 깨닫고, 【우즈】가 죽음을 받아들이고 【띠띠】와 이별하는 이야기를 만들어야겠다고 생각했습니다.</p>
            <p>엔딩 이후의 [마지막 산책] 장면은 특히 오랜 시간 고민했습니다. 홀로 남아 기억을 품고 살아가는 【띠띠】의 삶과, 가족들과 함께 무지개다리를 건너는 【띠띠】의 삶 중 어떤 선택이 더 【띠띠】를 행복하게 해줄까에 대해 고민하다가 반려견을 키우는 친구와 함께 대화를 나눈 후, 지금의 에필로그 이야기로 결정했습니다.</p>
            <p>하지만 만약 여러분 마음속에 다른 결말이 있다면, 그 결말 그대로 기억해주셔도 좋습니다. 저는 【헤일리】, 【우즈】, 【띠띠】 모두가 행복했으면 합니다. 여러분은 본 이야기 속에서 【우즈】였으며, 【띠띠】였기에 여러분이 행복할 것 같은 결말로 기억해 주세요.</p>
            <p>플레이해주신 모든 분들께 진심으로 감사드립니다. 더 좋은 작품으로 다시 찾아뵙겠습니다.</p>
            <br>
            <p>마지막으로 작은 선물을 준비했습니다.<br> ▼ 각 캐릭터의 플레이 카드입니다.</p>
            <div class="card-gallery">
              <a href="woods.png" download>
                <img src="woods.png" alt="우즈 플레이 카드">
              </a>
              <a href="ttiti.png" download>
                <img src="ttiti.png" alt="띠띠 플레이 카드">
              </a>
            </div>
          </div>
        </details>
      </div>

      <div class="bottom-nav">
        <button class="nav-btn prev" id="prevWoods">이전(우즈 Story)</button>
        <button class="nav-btn prev" id="prevDdiddi">이전(띠띠 Story)</button>
      </div>
    </div>

    <hr class="custom-hr" />
    <section><p class="made">© Copyright 2025. 보또 All rights reserved.</p></section>
  </div>
</main>

<script type="module">
  import { guard, logout } from "./gate.js";
  guard();

  // 이전 페이지 이동
  document.querySelector('#prevWoods').onclick = () => (location.href = "woods.html");
  document.querySelector('#prevDdiddi').onclick = () => (location.href = "ttiti.html");

  // 엔딩 텍스트 템플릿
  const ENDINGS = {
    "우즈": "우리는 【헤일리】를 살해한 범인이 【우즈】라고 결론지었다.",
    "띠띠": "우리는 【헤일리】를 살해한 범인이 【띠띠】라고 결론지었다.",
    "제이슨": "우리는 【헤일리】를 살해한 범인이 【제이슨】이라고 결론지었다.",
    "톰": "우리는 【헤일리】를 살해한 범인이 【톰】이라고 결론지었다.",
    "마크": "우리는 【헤일리】를 살해한 범인이 【마크】라고 결론지었다.",
    "레오": "우리는 【헤일리】를 살해한 범인이 【레오】라고 결론지었다.",
    "루카스": "우리는 【헤일리】를 살해한 범인이 【루카스】라고 결론지었다.",
  };
    // 엔딩 텍스트 템플
    const ENDINGS2 = {
    "우즈": "그때, 【헤일리】가 우리 앞에 나타났다.\n“그게 무슨 말이야. 그럴 리가 없잖아. 대체 【우즈】가 왜 나를 죽였다고 생각하는 거야? 둘이 뭘 숨기고 있는 거야? 뭔가 오해하고 있는 게 분명해.”\n【헤일리】의 목소리가 떨렸다.\n“억울하게 죽은 나를 위해 범인을 찾는다고 했지? 하지만 나는… 내가 죽은 것보다 너희가 서로 의심하는 게 더 속상해.”\n【헤일리】가 우리를 번갈아 바라보며 말했다.\n“둘 다 숨김없이 모든 걸 말해줘. 나도 내가 기억하는 걸 다시 말해줄게. 나를 살해한 사람은 분명히 【띠띠】의 상태를 걱정하던 인물이었고, 우리 집에도 관심이 많았던 인물이었어. 자, 이제 둘도 숨김없이 모든 걸 서로에게 털어놔.” 그렇게 말한 뒤 헤일리는 어디론가 가버렸다.\n[지시]\n 추가로 [10분]의 대화 시간이 주어졌습니다. 【헤일리】를 살해한 범인을 찾아 다시 투표해주세요. \n만약 여기서 본 이야기를 마치겠다면 [사건의 진상]으로 넘어갑니다. [마지막 산책]은 【우즈】 엔딩에서는 제공하지 않습니다.",
    "띠띠": "그때, 【헤일리】가 우리 앞에 나타났다.\n“그게 무슨 말이야. 그럴 리가 없잖아. 대체 【띠띠】가 왜 나를 죽였다고 생각하는 거야? 둘이 뭘 숨기고 있는 거야? 뭔가 오해하고 있는 게 분명해.”\n【헤일리】의 목소리가 떨렸다.\n“억울하게 죽은 나를 위해 범인을 찾는다고 했지? 하지만 나는… 내가 죽은 것보다 너희가 서로 의심하는 게 더 속상해.”\n【헤일리】가 우리를 번갈아 바라보며 말했다.\n“둘 다 숨김없이 모든 걸 말해줘. 나도 내가 기억하는 걸 다시 말해줄게. 나를 살해한 사람은 분명히 【띠띠】의 상태를 걱정하던 인물이었고, 우리 집에도 관심이 많았던 인물이었어. 자, 이제 둘도 숨김없이 모든 걸 서로에게 털어놔.” 그렇게 말한 뒤 헤일리는 어디론가 가버렸다.\n[지시]\n 추가로 [10분]의 대화 시간이 주어졌습니다. 【헤일리】를 살해한 범인을 찾아 다시 투표해주세요. \n만약 여기서 본 이야기를 마치겠다면 [사건의 진상]으로 넘어갑니다. [마지막 산책]은 【띠띠】 엔딩에서는 제공하지 않습니다.",
    "제이슨": "【띠띠】, 우리가 찾은 단서를 네가 【썬즈 씨】에게 건네는 거야. 네가 찾아서 가져다 준 것은 불법이라 보기 어려울 거야. 할 수 있지? 띠띠? 이제 정말 시간이 없어. “우리는 우리가 결정적 단서라고 생각했던 물건을 썬즈 씨의 사무실 앞에 가져다 놓았다. 그리고 띠띠는 목이 터지라 짖었다. 잠시 후 나온 썬즈 씨는 어리둥절 하더니, 이윽고 이게 헤일리 사건의 단서인거냐며 띠띠를 쓰다듬어 준 뒤, 곧장 사진을 찍고 인터넷 기사를 준비했다. 기사 내용은 헤일리를 짝사랑 했던 남자의 끔직한 범죄. 곧 기사를 올린 그녀의 사무실로 경찰서에서 전화가 걸려왔다. 썬즈 대체 이게 무슨 짓이냐. 이게 무슨 말도 안되는 일이야. 그날 제이슨 씨는 마크 씨와 사진을 거래하고 있었다는 알리바이가 확인되었다. 제이슨씨는 범인이 아니야. 당장 기사를 내리도록 해. 어디서 부터 잘 못된 걸까. 우리의 추리를 탓하고 있을 때, 우리 앞에 헤일리가 나타났다. 둘 다 수고했어. 그런데 이제 그만하자. 나는 이미 죽었고, 나는 우즈랑 띠띠랑 함께했던 삶이 충분히 행복했어. 그러니 미련은 없어. 우즈, 띠띠 우리 마지막 산책가지 않을래? 여기서의 미련은 다 잊고, 우리 즐겁게 산책가자. 그리고 이제 떠나는 거야. 나는 너희가 더는 슬퍼하고 괴로워하지 않았으면 좋겠어.",
    "톰": "여기에 톰 2 엔딩 내용을 넣어주세요.",
    "마크": "여기에 마크 2 엔딩 내용을 넣어주세요.",
    "레오": "여기에 레오 2 엔딩 내용을 넣어주세요.",
    "루카스": "여기에 루카스 2 엔딩 내용을 넣어주세요.",
  };


  // 노드 캐시
  const form = document.querySelector('#vote-form');

  const endingBox  = document.querySelector('#result-ending');
  const endingText = document.querySelector('#ending-text');
  const endingNote = document.querySelector('#ending-note');

  const epiBox  = document.querySelector('#result-epilogue');
  const epiText = document.querySelector('#epilogue-text');
  const epiNote = document.querySelector('#epilogue-note');

  const truthBox  = document.querySelector('#result-truth');
  const truthText = document.querySelector('#truth-text');
  const truthNote = document.querySelector('#truth-note');

  form.addEventListener('submit', (e) => {
  e.preventDefault();
  const data = new FormData(form);
  const suspect = data.get('suspect');
  const motive = (document.querySelector('#motive').value || '').trim();

  // ① 범인 이름 표시 : 엔딩 1 <- 엔딩 이름
  const headerLine = ``;

  // ② 기존 엔딩
  const base = ENDINGS[suspect] || "";
  const baseLine = base;

  // ③ 동기 (사용자가 입력한 그대로, “하기 위해서” 자동 처리 없음)
  const motiveLine = motive ? `그가 ${motive}(하)기 위해서 범행을 계획했다고 판단했기 때문이었다.` : "";

   // ④ 두 번째 엔딩 : 엔딩2
  const second = ENDINGS2[suspect] || "";
  const secondLine = second ? `${second}` : "";

  // 출력 구성
  endingText.textContent = [
    headerLine, baseLine, motiveLine, secondLine
  ].filter(Boolean).join("\n\n");

  endingNote.textContent = "에필로그(마지막 산책)가 준비되어 있습니다.\n바로 사건의 진상으로 넘어가셔도 좋습니다.";

  endingBox.hidden = false;
  epiBox.hidden = true;
  truthBox.hidden = true;

  endingBox.scrollIntoView({ behavior: 'smooth', block: 'start' });
});

  // 마지막 산책 → 에필로그(3차 대본) 표시
  document.querySelector('#lastWalk')?.addEventListener('click', () => {
    const epilogueHtml = `
      <section class="script-box" aria-label="마지막 산책 대본">
        <div class="script-grid">

        <!-- 경찰서 -->
        <div class="narration">경찰서</div>
        <div class="narration">
          썬즈가 올린 기사로 경찰서는 발칵 뒤집혔다. 구금 시간이 다 되어 풀려나기 직전이었지만,
          구속 영장이 발부되며 본격적인 수사가 시작되기로 결정되었다.
        </div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">된 건가? 이제 수사가 제대로 되겠지?</div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">왈! (웅! 우리가 해냈어.)</div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">고생했어, 띠띠. 이제 범인이 제대로 잡히는지 지켜보자.</div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">
          ……왈왈왈…… (우즈. 사실 헤일리도 지금 이곳에 있어. 공원에서 우리를 기다린대.
          우리 여기까지 하고 공원에 가는 건 어때? 헤일리가 마지막으로 산책하고 싶대.)
        </div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">헤일리가……마지막으로?</div>

        <div class="narration">
          우즈는 잠시 멈칫했다. 헤일리를 다시 만난다는 게 기쁘면서도,
          동시에 '마지막'이라는 말이 가슴을 무겁게 짓눌렀다.
        </div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">
          ……그래, 공원으로 가자. 헤일리를 혼자 둘 수는 없지. 가자, 띠띠.
        </div>

        <div class="narration">
          우즈와 띠띠는 소란스러운 경찰서를 빠져나와, 헤일리가 기다리고 있는 공원으로 달려갔다.
          그들이 항상 산책을 나갔던 그곳으로.
        </div>

        <div class="scene-divider">＊＊＊＊＊＊＊＊＊＊＊＊＊</div>

        <!-- 공원 -->
        <div class="narration">공원</div>
        <div class="narration">
          제법 쌀쌀한 공기, 해가 지고 어두워진 공원. 가로등 밑, 그림자가 없는 한 여성이 서 있었다.
          바로 헤일리였다. 헤일리는 우즈와 띠띠를 발견하자 밝게 웃으며 손을 흔들었다.
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">왔구나! 기다렸어!</div>

        <div class="narration">
          우즈는 그녀를 향해 달려가 그대로 껴안았다. 한참을 헤일리를 안고 있던 우즈가
          헤일리를 품에서 떼어내고 그녀를 바라보았다. 우즈의 입술이 움찔거렸다.
          하고 싶은 말이 많았지만, 끝내 아무 말도 내뱉지 못한 우즈는 헤일리의 얼굴만 바라보았다.
          띠띠는 그 옆에 다가와 헤일리의 다리에 기댔다.
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">둘 다 정말 고마워. 고생했어. 어때? 이제 미련은 안 남아?</div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">……최선을 다했어. 하지만 끝까지 보지 못해서 조금 찜찜하긴 해.</div>

        <div class="line name">헤일리</div>
        <div class="line said">
          괜찮아. 우즈와 띠띠가 해준 것만으로도 충분해. 나는 다시 우즈도 볼 수 있고,
          띠띠도 볼 수 있어서 그것만으로도 행복해.
        </div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">
          왈왈! (나도 헤일리를 다시 볼 수 있어서 행복해. 헤일리 그런데 안 무서웠어?)
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">
          처음엔 무서웠어. 죽음이라는 게, 끝이라는 게. 그런데 그래도 죽은 후에도
          이렇게 살아갈 수 있다는 게……안심되더라. 미안하지만, 우즈도 함께라서 나 조금 안심했어.
        </div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">……나도 너를 혼자 두지 않아서, 다행이라 생각해.</div>

        <div class="line name">헤일리</div>
        <div class="line said">
          그래서 걱정됐어. 우즈가 미련이 남아서 여기에, 악령으로 남을까 봐. 그게 너무 무서웠어.
        </div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">……괜찮아. 이제. 네가 원하지 않는다면 그럴 일은 없어.</div>

        <div class="narration">
          잠시 침묵이 흘렀다. 차가운 바람이 공원을 스쳐 지나갔다.
          헤일리가 먼저 밝게 웃으며 말했다.
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">
          우즈, 띠띠. 우리 다른 건 잊고, 예전처럼 산책하지 않을래?
          즐거운 마음으로 이별하는 거야. 띠띠가 정말 좋아하는 곳이자 우즈를 처음 만난 이곳,
          우리의 추억이 가득 담긴 곳이잖아. 이별하기 마지막 장소로 좋은 것 같은데 어때?
        </div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">
          왈왈! (마지막은 슬프지만, 헤일리와 함께인 건 좋아!)
        </div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">나도……헤일리와 함께 걷는 건 언제나 좋아.</div>

        <div class="scene-divider">＊＊＊＊＊＊＊＊＊＊＊＊＊</div>

        <div class="narration">
          그렇게 셋은 가로등이 켜진 공원을 하염없이 걸었다.
          걷다 멈춰 서다를 반복하며 과거 추억 얘기를 나누며 웃고 또 웃었다.
          헤일리와 처음 만난 날, 띠띠를 처음 데려온 날, 셋이 함께했던 소소한 일상들.
          그 모든 순간이 지금은 너무나 소중하게 느껴졌다.
        </div>

        <div class="narration">
          어느새 공원 길의 끝에 다다랐다. 헤일리의 표정이 조금씩 슬퍼졌다.
          그녀는 띠띠를 향해 입을 열었다.
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">띠띠, 우리는 이제……떠나야 할 것 같아.</div>

        <div class="narration">
          우즈는 헤일리의 말에 움찔했다. 알고는 있었지만, 막상 떠나려니 무서워졌다.
          그런 우즈를 눈치챈 듯, 헤일리는 우즈의 손을 잡으며 말을 이었다.
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">돌아가는 길은 띠띠 혼자 가야 하는데……괜찮겠어?</div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">
          왈왈! 왈! (당연하지. 걱정 마! 헤일리는 내 걱정 없이 가! 우즈도!)
        </div>

        <div class="narration">
          띠띠는 슬퍼 보이는 헤일리를 향해 밝게 말했다. 신난다는 듯이 꼬리도 흔들며.
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">
          띠띠가 처음 우리 집에 와서부터 지금까지 정말 행복했어.
          띠띠는 소중한 우리 가족이야. 띠띠도……내가 너의 가족이었니?
          우리와 함께하면서 힘든 건 없었어?
        </div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">
          왈! 왈왈왈! (힘들지 않았어! 헤일리와 함께한 세상이 내 세상의 전부였는걸.
          헤일리를 기다리고 함께하는 순간들, 정말 다 즐거웠어. 고마웠어!
          내 걱정하지 말고 가!)
        </div>

        <div class="narration">[띠띠 플레이어는 우즈 플레이어에게 남기고 싶은 말을 전해주세요]</div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">
          띠띠, 헤일리만큼 너와 긴 시간을 보낸 건 아니지만 내게도 띠띠는 소중했어.
          여기서 다른 사람들 말 잘 듣고 더 많이 행복하다가 우리 다시 만나자.
        </div>

        <div class="narration">[우즈 플레이어는 띠띠 플레이어에게 남기고 싶은 말을 전해주세요]</div>

        <div class="line name">헤일리</div>
        <div class="line said">
          알겠어. 띠띠. 이번에는 우리가 너를 기다릴게. 꼭 더 많이 즐기다 와!
        </div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">왈왈왈! (알았어! 어서 가!)</div>

        <div class="narration">
          헤일리와 우즈는 띠띠를 한참 바라보다가 눈을 감았다.
          그러자 그들 주위로 빛이 감싸 올랐고 서서히 몸이 사라지기 시작했다.
          정말로 이별이 다가오는 순간이었다. 띠띠는 꼬리를 흔들며 그들이 서 있던 자리로 다가갔다.
        </div>

        <div class="narration">
          잠시 후, 우즈와 헤일리가 완전히 사라졌다. 띠띠는 그들이 서 있던 자리에 한참을.
          한참을. 혼자. 우두커니 서 있었다.
        </div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">왈. (헤일리.)</div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">왈. (우즈.)</div>

        <div class="narration">
          더는 아무 대답이 없는 공원. 띠띠는 차가운 밤공기를 느끼며
          왠지 마음이 시리는 기분이 들었다. 눈물이 툭 떨어질 것 같았지만,
          띠띠는 그대로 뒤를 돌아 헤일리와 우즈와 함께 걸어온 길을 홀로 되돌아갔다.
        </div>

        <div class="narration">
          돌아가는 길은 너무나 외롭고 힘들었다. 이제는 너무 늙어버린 탓인지,
          오늘 하루 많은 무리를 했던 터인지, 홀로 돌아가는 것 때문인지.
          유난히 돌아가는 길은 더욱 힘들었다. 하염없이 길게만 느껴지는
          헤일리의 집으로 돌아가는 길이었다.
        </div>

        <div class="scene-divider">＊＊＊＊＊＊＊＊＊＊＊＊＊</div>

        <!-- 헤일리의 집 -->
        <div class="narration">헤일리의 집</div>
        <div class="narration">
          한참을 타박타박 걸어온 끝에 집에 도착했다.
          1층에 들어서자마자 그리운 헤일리와 우즈의 향기가 났다.
          그리고 끔찍했던 그날의 모습과 함께 둘의 피 냄새가 풍겨왔다.
        </div>

        <div class="narration">
          다시 한번 둘의 죽음을 체감한 띠띠는 눈물이 나기 전에
          헤일리의 방으로 곧장 향했다. 그리고는 헤일리의 이불을 입에 물고 구석으로 향했다.
          며칠 동안의 피로가 한 번에 몰려왔다.
        </div>

        <div class="narration">
          그리운 헤일리의 냄새를 맡으며, 띠띠는 눈을 감았다. 이제 푹 쉴 시간이다.
        </div>

        <div class="scene-divider">＊＊＊＊＊＊＊＊＊＊＊＊＊</div>

        <!-- ?????? -->
        <div class="narration">??????</div>
        <div class="narration">
          얼마나 잤는지 모를 만큼 시간이 흘렀다. 단잠을 잔 덕분인지
          그간 잘 보이지 않던 앞이 또렷하게 보였다.
          몸을 일으키자 평소와 달리 몸이 가볍게 일어났다.
        </div>

        <div class="narration">
          신기한 마음에 뒤를 돌아보니, 여전히 잠들어 있는 띠띠 자신의 모습이 보인다.
          헤일리의 이불을 입에 문 채 평온하게 숨을 멈춘 모습이었다.
        </div>

        <div class="narration">
          순간 띠띠는 흠칫 놀랐지만, 이내 상황을 이해했다.
          그리고는 공원을 향해 내달렸다. 헤일리와 우즈가 떠난 그곳으로.
          달리고 또 달렸다. 너무나도 행복한 모습으로.
        </div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">헥헥……왈! (나도……! 나도 데려가 줘!)</div>

        <div class="narration">
          띠띠가 간절히 바라자 빛이 띠띠의 몸을 감쌌다.
          잠시 의식이 흐려졌고, 눈을 뜨자 자신은 어느 다리 앞에 있었다.
          분명 헤일리와 우즈는 저 다리 건너편에 있을 터. 띠띠는 신나게 다리를 향해 달려갔다.
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">띠띠! 여기야! 왜 벌써 왔어!</div>

        <div class="narration">
          헤일리와 우즈가 씁쓸한 표정으로 나타났다.
        </div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">띠띠 이 녀석. 더 있다 오라니까, 금방 따라오면 어떻게 해!</div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">
          왈……왈! (하지만……보고 싶었는걸! 그리고 나 이제 안 아파!)
        </div>

        <div class="narration">
          띠띠는 자신이 건강하다는 걸 보여주듯 방방 뛰었다.
          헤일리와 우즈는 웃음이 터졌다.
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">
          그건 다행이네. 이번에는 우리가 너를 기다리려 했는데,
          너무 빨리 와서 놀랐다고. 1년이고 10년이고 여기서 너를 기다릴 생각이었다고.
        </div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">왈왈! (기다려줘서 고마워!)</div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">
          띠띠, 여기는 무지개 다리래. 우리처럼 띠띠 같은 가족을 둔 사람들이
          다시 재회하는 곳이라고 하더라고. 우리 함께 다리를 건너자.
        </div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">
          왈! (좋아! 우리 다리를 건너면 산책 가자! 나는 헤일리도 우즈도 산책도 너무 좋아!)
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">그래! 함께 가자, 산책!</div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">그러면 나는 너희 모습을 찍어줄게.</div>

        <div class="line name speaker-ttiti">띠띠</div>
        <div class="line said">
          왈왈! (헤일리! 너와 나의 산책이 끝난 게 아니라서 나는 너무 행복해!)
        </div>

        <div class="line name">헤일리</div>
        <div class="line said">
          띠띠~ 우즈도 있잖아. 너와 나, 우리의 산책이야.
        </div>

        <div class="line name speaker-woods">우즈</div>
        <div class="line said">
          하하! 가면 띠띠랑 더욱더 친해져야겠는걸. 자 이제 가자!
        </div>

        <div class="narration">
          그렇게 셋은 무지개 다리를 건너갔다. 죽은 이들답지 않은 밝은 표정으로
          그들은 행복하게 떠났다. 아마도 이들은 앞으로도 행복할 것이다.
          서로 사랑하고, 산책하며 행복하게 말이다.
        </div>

        <div class="narration">너와 나, 우리의 산책 FIN.</div>

        </div>
      </section>
    `;

    // 대본을 HTML로 주입
    epiText.innerHTML = epilogueHtml;

    // 안내 문구
    epiNote.textContent = "사건의 진상을 확인하고 싶은 분은 [사건의 진상]을 눌러주세요";

    epiBox.hidden = false;
    truthBox.hidden = true;

    epiBox.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

  // 사건의 진상 버튼(엔딩/에필로그 둘 다) → 진상 박스 표시
  document.querySelectorAll('.truth-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      // 여기 내용은 실제 작품 로직에 맞게 교체 가능
      const reveal = [
      "작품 해설",
      "본 작품은 플레이어 중 한 명인 【우즈】도 사실은 【헤일리】가 살해당한 날 함께 살해당했다는 내용입니다. 자신이 죽은 줄 모르는 【우즈】의 영혼을 볼 수 있는 반려견 【띠띠】가 주인들의 억울한 죽음을 밝혀나가는 이야기입니다.",
      "우즈의 진실",
      "【우즈】가 병원에서 깨어나는 것은 치료를 받는 것이 아닙니다. 사건 현장에서 즉사하지 않고 병원으로 옮겨진 후 사망했기에, 【우즈】는 자신이 치료받기 위해 깨어났다고 착각합니다. 뒷통수를 가격당한 기억만 있지만, 등 부분의 찌르는 듯한 통증은 의식을 잃은 후 추가로 상처를 입었음을 암시합니다.",
      "경찰들의 대화를 엿듣는 것도 영혼인 【우즈】가 그들의 이야기를 듣는 것이며, 경찰이 【우즈】에게 단서가 있는지 알아보러 가는 것은 실제로 【우즈】의 시체를 조사하러 가는 것입니다.",
      "【우즈】는 영혼이기에 직접 물건을 만지거나 조사하지 못합니다. 오직 주민들의 증언을 통해서만 정보를 수집할 수 있습니다.",
      "죽음의 단서",
      "사건 당일 피해자가 2명이었다는 것, 하지만 연쇄 살인이 아닌 단일 사건이었다는 점이 핵심입니다. 【헤일리】가 임신 8주차였지만 법적으로 태아는 피해자로 인정되지 않으므로, 두 번째 피해자는 【우즈】임을 알 수 있습니다.",
      "【띠띠】가 이 사실을 바탕으로 【우즈】에게 힌트를 주고, 【우즈】가 자신이 죽었다는 사실을 깨달으면 영능력을 사용할 수 있게 되어 심문실의 용의자들의 증언을 들을 수 있게 됩니다.",
      "범인 특정",
      "헤일리의 증언에서 찾을 수 있는 증거",
	    "1	【띠띠】의 상태를 걱정하던 인물",
	    "2	【헤일리】의 집에 관심이 많았던 인물",
      "띠띠의 기억에서 찾을 수 있는 증거",
	    "1	【우즈】와 비슷한 냄새가 나는 인물",
	    "2	【띠띠】가 싫어하는 냄새가 나는 인물",
      "용의자 검증",
      "제이슨",
      "【우즈】를 시기 질투하여 【우즈】와 비슷한 제품을 전혀 사용하지 않습니다. 따라서 비슷한 냄새가 날 수 없어 범인에서 제외됩니다.",
      "톰",
      "【띠띠】를 아끼지만 인간을 더 우선시하며, 노견인 【띠띠】가 언제 죽어도 이상하지 않다고 말합니다. 【띠띠】의 건강을 진심으로 걱정하는 인물로 보기 어려워 범인에서 제외됩니다.",
      "마크",
      "【헤일리】의 집에는 관심이 없습니다. 단지 【띠띠】의 유명세를 이용하고 싶어할 뿐이므로 범인에서 제외됩니다.",
      "레오",
      "평소 술을 전혀 마시지 않으며 소독약을 취급할 일이 없습니다. 라이브 방송 전 술을 뒤집어썼지만 즉시 씻고 갈아입었기에 【띠띠】가 싫어하는 냄새가 나지 않아 범인에서 제외됩니다.",
      "루카스",
      "모든 조건을 충족합니다.",
	    "•	【띠띠】의 상태를 걱정함: 휘두른 흉기에 【띠띠】가 다쳐 무의식적으로 걱정",
	    "•	【헤일리】의 집에 관심: 14년 전 살인 사건 은폐를 위해 집을 인수하려 함",
	    "•	【우즈】와 비슷한 냄새: 【헤일리】가 나눔한 【우즈】의 옷을 입음",
	    "•	알코올 냄새: 수의사로서 소독약 사용",
      "범행 동기",
      "【루카스】의 동기는 14년 전 자신이 저지른 살인을 은폐하기 위함입니다. 【헤일리】가 도시로 떠나면 그녀의 집은 '애니멀 쉼터' 건설을 위해 철거될 예정이었고, 기초 공사 중 지하 콘크리트 아래 묻힌 【제이슨】의 동생 【준】의 시신이 발견될 위험이 있었습니다.",
      "처음에는 집을 인수하여 직접 쉼터를 운영하려 했으나 거절당했고, 【헤일리】의 이사가 임박하자 조급해져 【헤일리】를 제거하기로 결심했습니다.",
      "14년 전 【준】을 살해한 것은 죄없는 동물들에게 화풀이하는 【준】을 막으려다 발생한 사고였습니다.",
      "결론",
      "주민들의 증언과 단서를 조합하면 범인은 【루카스】입니다. 모든 조건을 충족하는 유일한 인물이 【루카스】이기 때문입니다.",
      ].join("\n\n");

      truthText.textContent = reveal;
      truthNote.textContent = "다시 한 번 플레이 해주셔서 감사합니다.";

      truthBox.hidden = false;
      truthBox.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
  });
</script>
</body>
</html>
